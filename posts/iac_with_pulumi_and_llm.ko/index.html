<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi | Taein.dev</title>
<meta name=keywords content="pulumi,llm,iac,Infrastructure as Code"><meta name=description content="LLM으로 인프라를 코드로 작성해본 경험을 공유합니다."><meta name=author content="Me"><link rel=canonical href=https://maintain0404.github.io/posts/iac_with_pulumi_and_llm.ko/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://maintain0404.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://maintain0404.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://maintain0404.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://maintain0404.github.io/apple-touch-icon.png><link rel=mask-icon href=https://maintain0404.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-HBTP6KYQ2X"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HBTP6KYQ2X",{anonymize_ip:!1})}</script><meta property="og:title" content="LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi"><meta property="og:description" content="LLM으로 인프라를 코드로 작성해본 경험을 공유합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://maintain0404.github.io/posts/iac_with_pulumi_and_llm.ko/"><meta property="og:image" content="https://maintain0404.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-02T23:20:45+09:00"><meta property="article:modified_time" content="2025-02-02T23:20:45+09:00"><meta property="og:site_name" content="Taein.dev"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maintain0404.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi"><meta name=twitter:description content="LLM으로 인프라를 코드로 작성해본 경험을 공유합니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://maintain0404.github.io/posts/"},{"@type":"ListItem","position":2,"name":"LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi","item":"https://maintain0404.github.io/posts/iac_with_pulumi_and_llm.ko/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi","name":"LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi","description":"LLM으로 인프라를 코드로 작성해본 경험을 공유합니다.","keywords":["pulumi","llm","iac","Infrastructure as Code"],"articleBody":"개요 진행하던 사이드프로젝트의 인프라 구성을 AWS 콘솔로 구성하던 중 AI를 활용해보면 어떨까 하는 생각이 들었습니다. Terraform이 이 분야에서 가장 유명하고 사용해본 적도 있지만 HCL이 익숙하지 않은 문제가 있어 Pulumi라는 도구를 사용해보기로 했습니다. Pulumi + AI로 간단한 인프라 구성을 진행해본 후기를 공유합니다.\nPulumi Pulumi 소개 Pulumi는 Infrastructure as Code(IaC) 도구로, 인프라를 코드로 관리할 수 있게 해줍니다. 이 분야에서 가장 유명한 도구는 Terraform(OpenTofu)이지만 개요에서 잠깐 언급했듯이 HCL이라는 별도의 언어를 학습해야 하는 문제가 있습니다. 반면 Pulumi는 Python, Node.js, YAML 등 개발자들에게 친숙한 다양한 언어의 IaC를 지원합니다.\nPulumi 셋업 Terraform(OpenTofu)처럼 Pulumi도 State라는 인프라 상태를 나타내는 개념이 있습니다. Pulumi이 실제 인프라를 수정하면서 State를 수정하고 State 변화를 통해 인프라 변경을 추적합니다. 다양한 저장소를 지원하지만 저는 File 저장소를 사용했습니다. file을 저장소로 사용하려면 아래 명령으로 로그인하면 됩니다.\npulumi login file:///path/to/your/pulumi.state LLM 활용하기 시작 프롬프트는 이렇게 작성했고 첫 결과물은 아래와 같습니다.\n“AWS에 인프라를 구성하려고 해. 구성할 서비스는 단일 EC2 인스턴스에 docker-compose로 웹 서버를 서빙하는 구조야. VPC, EC2를 구성하고 이 인스턴스에 셸 접근이 가능한 AMI를 하나 만드는 구성을 pulumi-python으로 작성해줘”\nimport pulumi import pulumi_aws as aws # VPC 생성 vpc = aws.ec2.Vpc(\"my-vpc\", cidr_block=\"10.0.0.0/16\", enable_dns_hostnames=True, enable_dns_support=True, tags={\"Name\": \"my-vpc\"}) # 퍼블릭 서브넷 생성 public_subnet = aws.ec2.Subnet(\"public-subnet\", vpc_id=vpc.id, cidr_block=\"10.0.1.0/24\", map_public_ip_on_launch=True, availability_zone=\"us-west-2a\", tags={\"Name\": \"public-subnet\"}) # 인터넷 게이트웨이 생성 및 VPC에 연결 igw = aws.ec2.InternetGateway(\"my-igw\", vpc_id=vpc.id, tags={\"Name\": \"my-igw\"}) # 라우트 테이블 생성 및 인터넷 게이트웨이로 라우팅 route_table = aws.ec2.RouteTable(\"public-rt\", vpc_id=vpc.id, routes=[aws.ec2.RouteTableRouteArgs( cidr_block=\"0.0.0.0/0\", gateway_id=igw.id )], tags={\"Name\": \"public-rt\"}) # 라우트 테이블을 퍼블릭 서브넷에 연결 route_table_association = aws.ec2.RouteTableAssociation(\"public-rta\", subnet_id=public_subnet.id, route_table_id=route_table.id) security_group = aws.ec2.SecurityGroup(\"web-sg\", description=\"Allow HTTP and SSH access\", vpc_id=vpc.id, ingress=[ aws.ec2.SecurityGroupIngressArgs( protocol=\"tcp\", from_port=80, to_port=80, cidr_blocks=[\"0.0.0.0/0\"], ), aws.ec2.SecurityGroupIngressArgs( protocol=\"tcp\", from_port=22, to_port=22, cidr_blocks=[\"0.0.0.0/0\"], ) ], egress=[aws.ec2.SecurityGroupEgressArgs( protocol=\"-1\", from_port=0, to_port=0, cidr_blocks=[\"0.0.0.0/0\"], )], tags={\"Name\": \"web-sg\"}) ami = aws.ec2.get_ami(most_recent=True, owners=[\"099720109477\"], filters=[aws.GetAmiFilterArgs( name=\"name\", values=[\"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*\"], )]) user_data = \"\"\"#!/bin/bash apt-get update apt-get install -y docker.io docker-compose systemctl start docker systemctl enable docker \"\"\" instance = aws.ec2.Instance(\"web-server\", instance_type=\"t2.micro\", vpc_security_group_ids=[security_group.id], ami=ami.id, subnet_id=public_subnet.id, user_data=user_data, tags={\"Name\": \"web-server\"}, key_name=\"your-key-pair-name\") # 기존 키 페어 이름을 지정하세요 pulumi.export(\"instance_public_ip\", instance.public_ip) 첫 구성 자체도 IAM을 AMI로 오타내서 빠진 것을 제외하면 원하는 부분은 다 포함되어 있습니다. 아래 프롬프트로 IAM 계정을 추가하고 권한 부여하는 부분을 추가했습니다. HTTPS 접근을 위한 보안 그룹 수정은 제가 직접 수정했습니다.\n“이 파일은 pulumi로 AWS에 인프라를 구성하고 있어. 구성할 서비스는 단일 EC2 인스턴스에 docker-compose로 웹 서버를 서빙하는 구조야. VPC, AMI를 사용한 EC2를 구성하고 있어. 이 EC2 인스턴스에 쉘 접근이 가능한 IAM 계정을 만드는 코드를 추가해줘”\n“resumait-shell-user IAM 계정에 자체적으로 비밀번호를 바꿀 수 있는 권한, 이메일을 연결할 수 있는 권한을 추가해줘”\nimport pulumi import pulumi_aws as aws # 공통 태그 정의 common_tags = { \"service-name\": \"resumait\" } # VPC 생성 vpc = aws.ec2.Vpc(\"resumait-vpc\", cidr_block=\"10.0.0.0/16\", enable_dns_hostnames=True, enable_dns_support=True, tags={**common_tags, \"Name\": \"resumait-vpc\"}) # 퍼블릭 서브넷 생성 public_subnet = aws.ec2.Subnet(\"resumait-public-subnet\", vpc_id=vpc.id, cidr_block=\"10.0.1.0/24\", map_public_ip_on_launch=True, availability_zone=\"ap-northeast-2a\", tags={**common_tags, \"Name\": \"resumait-public-subnet\"}) # 인터넷 게이트웨이 생성 및 VPC에 연결 igw = aws.ec2.InternetGateway(\"resumait-igw\", vpc_id=vpc.id, tags={**common_tags, \"Name\": \"resumait-igw\"}) # 라우트 테이블 생성 및 인터넷 게이트웨이로 라우팅 route_table = aws.ec2.RouteTable(\"resumait-public-rt\", vpc_id=vpc.id, routes=[aws.ec2.RouteTableRouteArgs( cidr_block=\"0.0.0.0/0\", gateway_id=igw.id )], tags={**common_tags, \"Name\": \"resumait-public-rt\"}) # 라우트 테이블을 퍼블릭 서브넷에 연결 route_table_association = aws.ec2.RouteTableAssociation(\"resumait-public-rta\", subnet_id=public_subnet.id, route_table_id=route_table.id) # 보안 그룹 생성 security_group = aws.ec2.SecurityGroup(\"resumait-web-sg\", description=\"Allow HTTP and SSH access\", vpc_id=vpc.id, ingress=[ aws.ec2.SecurityGroupIngressArgs( protocol=\"tcp\", from_port=80, to_port=80, cidr_blocks=[\"0.0.0.0/0\"], ), aws.ec2.SecurityGroupIngressArgs( protocol=\"tcp\", from_port=443, to_port=443, cidr_blocks=[\"0.0.0.0/0\"], ), aws.ec2.SecurityGroupIngressArgs( protocol=\"tcp\", from_port=22, to_port=22, cidr_blocks=[\"0.0.0.0/0\"], ) ], egress=[aws.ec2.SecurityGroupEgressArgs( protocol=\"-1\", from_port=0, to_port=0, cidr_blocks=[\"0.0.0.0/0\"], )], tags={**common_tags, \"Name\": \"resumait-web-sg\"}) # AMI 선택 ami = aws.ec2.get_ami(most_recent=True, owners=[\"099720109477\"], filters=[aws.ec2.GetAmiIdsFilterArgs( name=\"name\", values=[\"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*\"], )]) # 사용자 데이터 스크립트 user_data = \"\"\"#!/bin/bash apt-get update apt-get install -y docker.io docker-compose systemctl start docker systemctl enable docker \"\"\" # EC2 인스턴스 생성 instance = aws.ec2.Instance(\"resumait-web-server\", instance_type=\"t2.micro\", vpc_security_group_ids=[security_group.id], ami=ami.id, subnet_id=public_subnet.id, user_data=user_data, tags={**common_tags, \"Name\": \"resumait-web-server\"}, key_name=\"resumait-dev\") # 기존 키 페어 이름을 지정하세요 # 출력 pulumi.export(\"instance_public_ip\", instance.public_ip) # IAM 사용자 생성 (콘솔 액세스 활성화) shell_user = aws.iam.User(\"resumait-shell-user\", name=\"resumait-shell-user\", tags={**common_tags, \"Name\": \"resumait-shell-user\"}) # 콘솔 로그인 비밀번호 생성 login_profile = aws.iam.UserLoginProfile(\"resumait-shell-user-login\", user=shell_user.name, password_reset_required=True) # IAM 액세스 키 생성 access_key = aws.iam.AccessKey(\"resumait-shell-user-key\", user=shell_user.name) # EC2 접근을 위한 IAM 정책 생성 shell_policy = aws.iam.Policy(\"resumait-shell-policy\", description=\"Policy for EC2 shell access\", policy=\"\"\"{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Effect\": \"Allow\", \"Action\": [ \"ec2:DescribeInstances\", \"ec2-instance-connect:SendSSHPublicKey\" ], \"Resource\": \"*\" } ] }\"\"\", tags={**common_tags, \"Name\": \"resumait-shell-policy\"}) # 사용자에게 정책 연결 policy_attachment = aws.iam.UserPolicyAttachment(\"resumait-shell-policy-attachment\", user=shell_user.name, policy_arn=shell_policy.arn) # IAM 사용자 셀프 관리 정책 생성 self_manage_policy = aws.iam.Policy(\"resumait-shell-self-manage-policy\", description=\"Policy for self-managing credentials and profile\", policy=\"\"\"{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Effect\": \"Allow\", \"Action\": [ \"iam:ChangePassword\", \"iam:GetAccountPasswordPolicy\", \"iam:UpdateLoginProfile\", \"iam:GetLoginProfile\", \"iam:UpdateUser\", \"iam:GetUser\" ], \"Resource\": [\"arn:aws:iam::*:user/${aws:username}\"] } ] }\"\"\", tags={**common_tags, \"Name\": \"resumait-shell-self-manage-policy\"}) # 사용자에게 셀프 관리 정책 연결 self_manage_policy_attachment = aws.iam.UserPolicyAttachment(\"resumait-shell-self-manage-attachment\", user=shell_user.name, policy_arn=self_manage_policy.arn) # 유저 정보 출력 pulumi.export('shell_user', shell_user.id) # 액세스 키와 콘솔 비밀번호 정보 출력 pulumi.export(\"shell_user_access_key_id\", access_key.id) pulumi.export(\"shell_user_secret_access_key\", access_key.secret) pulumi.export(\"shell_user_console_password\", login_profile.password) 후기 콘솔로 인프라 구성하는 것보다 훨씬 빠르고 쉽게 구성할 수 있었습니다. 비슷한 인프라를 콘솔로 구성해봤기 봤고, 코드가 의도한대로인지 대충은 알 수 있었기 때문에 더 좋았다고 생각합니다. 한눈에 보인다는 점에서 더더욱 좋았습니다 앞으로 UI는 AI 중심으로 재편될 것 내 기억을 떠올려보면 콘솔로 이 인프라를 처음 구성할 때 며칠은 걸렸음 공부해야 할 개념이 너무 많고 뭐가 있는지 찾기 힘들고 불편했었음 UI는 필요한 부분만 보여줘야 하는데 AWS 콘솔은 보여주는 게 너무 많음 AI가 이런 부분을 잘 해결해 줄 수 있을 것 같음 콘솔로 인프라를 구성할 때보다 훨씬 빠르고 쉽게 구성할 수 있었습니다. 정확히 재보진 않았지만 1시간을 넘진 않았습니다. 비슷한 인프라를 콘솔로 구성해보아서 지식/경험이 있었고 코드가 의도한대로 작성했는지 알 수 있었기 때문에 더 효율적이라고 생각합니다. AWS의 끔찍한(개인적인 생각입니다) UI와 다르게 필요한 부분만 한 눈에 보여 좋았습니다. 앞으로 UI도 AI 중심으로 재편될 것이 분명합니다. 제가 처음으로 AWS 인프라를 구성하던 때를 떠올려보면 EC2 인스턴스 목록을 보는 데만 몇 시간이 걸렸습니다. 보여주는 정보량이 너무 많아서 찾기 힘들고 불편했었습니다. AI를 사용하면 불필요한 EC2 \u003e 인스턴스 위계 계층 부분을 UI에서 전부 없애고 검색창 하나면 됩니다. 사용자 수준에 따라 보여주는 정보 수준도 다르게할 수 있습니다. 수준이 높다면 설정 하나하나 보여주지만 수준이 낮다면 어떤 운영체제 이미지를 썼는지 보여주지 않고 인스턴스 상태만 보여주는 식으로요. AI가 가져올 미래가 새삼 두려워지는 하루였습니다.\n","wordCount":"921","inLanguage":"en","image":"https://maintain0404.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-02-02T23:20:45+09:00","dateModified":"2025-02-02T23:20:45+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://maintain0404.github.io/posts/iac_with_pulumi_and_llm.ko/"},"publisher":{"@type":"Organization","name":"Taein.dev","logo":{"@type":"ImageObject","url":"https://maintain0404.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://maintain0404.github.io/ accesskey=h title="Taein.dev (Alt + H)"><img src=https://maintain0404.github.io/apple-touch-icon.png alt aria-label=logo height=35>Taein.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://maintain0404.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://maintain0404.github.io/archives title=archives><span>archives</span></a></li><li><a href=https://maintain0404.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://maintain0404.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://maintain0404.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi</h1><div class=post-meta><span title='2025-02-02 23:20:45 +0900 KST'>February 2, 2025</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;921 words&nbsp;·&nbsp;Me</div></header><div class=post-content><h2 id=개요>개요<a hidden class=anchor aria-hidden=true href=#개요>#</a></h2><p>진행하던 사이드프로젝트의 인프라 구성을 AWS 콘솔로 구성하던 중 AI를 활용해보면 어떨까 하는 생각이 들었습니다. Terraform이 이 분야에서 가장 유명하고 사용해본 적도 있지만 HCL이 익숙하지 않은 문제가 있어 Pulumi라는 도구를 사용해보기로 했습니다. Pulumi + AI로 간단한 인프라 구성을 진행해본 후기를 공유합니다.</p><h2 id=pulumi>Pulumi<a hidden class=anchor aria-hidden=true href=#pulumi>#</a></h2><h3 id=pulumi-소개>Pulumi 소개<a hidden class=anchor aria-hidden=true href=#pulumi-소개>#</a></h3><p>Pulumi는 Infrastructure as Code(IaC) 도구로, 인프라를 코드로 관리할 수 있게 해줍니다. 이 분야에서 가장 유명한 도구는 Terraform(OpenTofu)이지만 개요에서 잠깐 언급했듯이 HCL이라는 별도의 언어를 학습해야 하는 문제가 있습니다. 반면 Pulumi는 Python, Node.js, YAML 등 개발자들에게 친숙한 다양한 언어의 IaC를 지원합니다.</p><h3 id=pulumi-셋업>Pulumi 셋업<a hidden class=anchor aria-hidden=true href=#pulumi-셋업>#</a></h3><p>Terraform(OpenTofu)처럼 Pulumi도 State라는 인프라 상태를 나타내는 개념이 있습니다. Pulumi이 실제 인프라를 수정하면서 State를 수정하고 State 변화를 통해 인프라 변경을 추적합니다. 다양한 저장소를 지원하지만 저는 File 저장소를 사용했습니다. file을 저장소로 사용하려면 아래 명령으로 로그인하면 됩니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pulumi login file:///path/to/your/pulumi.state
</span></span></code></pre></div><h2 id=llm-활용하기>LLM 활용하기<a hidden class=anchor aria-hidden=true href=#llm-활용하기>#</a></h2><p>시작 프롬프트는 이렇게 작성했고 첫 결과물은 아래와 같습니다.</p><blockquote><p>&ldquo;AWS에 인프라를 구성하려고 해. 구성할 서비스는 단일 EC2 인스턴스에 docker-compose로 웹 서버를 서빙하는 구조야. VPC, EC2를 구성하고 이 인스턴스에 셸 접근이 가능한 AMI를 하나 만드는 구성을 pulumi-python으로 작성해줘&rdquo;</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulumi</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulumi_aws</span> <span class=k>as</span> <span class=nn>aws</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># VPC 생성</span>
</span></span><span class=line><span class=cl><span class=n>vpc</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Vpc</span><span class=p>(</span><span class=s2>&#34;my-vpc&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;10.0.0.0/16&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>enable_dns_hostnames</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>enable_dns_support</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;my-vpc&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 퍼블릭 서브넷 생성</span>
</span></span><span class=line><span class=cl><span class=n>public_subnet</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Subnet</span><span class=p>(</span><span class=s2>&#34;public-subnet&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;10.0.1.0/24&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>map_public_ip_on_launch</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>availability_zone</span><span class=o>=</span><span class=s2>&#34;us-west-2a&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;public-subnet&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인터넷 게이트웨이 생성 및 VPC에 연결</span>
</span></span><span class=line><span class=cl><span class=n>igw</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>InternetGateway</span><span class=p>(</span><span class=s2>&#34;my-igw&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;my-igw&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 라우트 테이블 생성 및 인터넷 게이트웨이로 라우팅</span>
</span></span><span class=line><span class=cl><span class=n>route_table</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTable</span><span class=p>(</span><span class=s2>&#34;public-rt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>routes</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTableRouteArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>gateway_id</span><span class=o>=</span><span class=n>igw</span><span class=o>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>    <span class=p>)],</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;public-rt&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 라우트 테이블을 퍼블릭 서브넷에 연결</span>
</span></span><span class=line><span class=cl><span class=n>route_table_association</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTableAssociation</span><span class=p>(</span><span class=s2>&#34;public-rta&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>subnet_id</span><span class=o>=</span><span class=n>public_subnet</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>route_table_id</span><span class=o>=</span><span class=n>route_table</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>security_group</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroup</span><span class=p>(</span><span class=s2>&#34;web-sg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Allow HTTP and SSH access&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>ingress</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupIngressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>from_port</span><span class=o>=</span><span class=mi>80</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>to_port</span><span class=o>=</span><span class=mi>80</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupIngressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>from_port</span><span class=o>=</span><span class=mi>22</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>to_port</span><span class=o>=</span><span class=mi>22</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>egress</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupEgressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;-1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>from_port</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>to_port</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>)],</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;web-sg&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ami</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>get_ami</span><span class=p>(</span><span class=n>most_recent</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>owners</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;099720109477&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>filters</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>GetAmiFilterArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>name</span><span class=o>=</span><span class=s2>&#34;name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>values</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>)])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>user_data</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s2>apt-get update
</span></span></span><span class=line><span class=cl><span class=s2>apt-get install -y docker.io docker-compose
</span></span></span><span class=line><span class=cl><span class=s2>systemctl start docker
</span></span></span><span class=line><span class=cl><span class=s2>systemctl enable docker
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>instance</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Instance</span><span class=p>(</span><span class=s2>&#34;web-server&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>instance_type</span><span class=o>=</span><span class=s2>&#34;t2.micro&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_security_group_ids</span><span class=o>=</span><span class=p>[</span><span class=n>security_group</span><span class=o>.</span><span class=n>id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>ami</span><span class=o>=</span><span class=n>ami</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>subnet_id</span><span class=o>=</span><span class=n>public_subnet</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user_data</span><span class=o>=</span><span class=n>user_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;web-server&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>key_name</span><span class=o>=</span><span class=s2>&#34;your-key-pair-name&#34;</span><span class=p>)</span>  <span class=c1># 기존 키 페어 이름을 지정하세요</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s2>&#34;instance_public_ip&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>public_ip</span><span class=p>)</span>
</span></span></code></pre></div><p>첫 구성 자체도 IAM을 AMI로 오타내서 빠진 것을 제외하면 원하는 부분은 다 포함되어 있습니다. 아래 프롬프트로 IAM 계정을 추가하고 권한 부여하는 부분을 추가했습니다. HTTPS 접근을 위한 보안 그룹 수정은 제가 직접 수정했습니다.</p><blockquote><p>&ldquo;이 파일은 pulumi로 AWS에 인프라를 구성하고 있어. 구성할 서비스는 단일 EC2 인스턴스에 docker-compose로 웹 서버를 서빙하는 구조야. VPC, AMI를 사용한 EC2를 구성하고 있어. 이 EC2 인스턴스에 쉘 접근이 가능한 IAM 계정을 만드는 코드를 추가해줘&rdquo;</p></blockquote><blockquote><p>&ldquo;resumait-shell-user IAM 계정에 자체적으로 비밀번호를 바꿀 수 있는 권한, 이메일을 연결할 수 있는 권한을 추가해줘&rdquo;</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulumi</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulumi_aws</span> <span class=k>as</span> <span class=nn>aws</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 공통 태그 정의</span>
</span></span><span class=line><span class=cl><span class=n>common_tags</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;service-name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># VPC 생성</span>
</span></span><span class=line><span class=cl><span class=n>vpc</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Vpc</span><span class=p>(</span><span class=s2>&#34;resumait-vpc&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;10.0.0.0/16&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>enable_dns_hostnames</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>enable_dns_support</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-vpc&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 퍼블릭 서브넷 생성</span>
</span></span><span class=line><span class=cl><span class=n>public_subnet</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Subnet</span><span class=p>(</span><span class=s2>&#34;resumait-public-subnet&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;10.0.1.0/24&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>map_public_ip_on_launch</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>availability_zone</span><span class=o>=</span><span class=s2>&#34;ap-northeast-2a&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-public-subnet&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인터넷 게이트웨이 생성 및 VPC에 연결</span>
</span></span><span class=line><span class=cl><span class=n>igw</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>InternetGateway</span><span class=p>(</span><span class=s2>&#34;resumait-igw&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-igw&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 라우트 테이블 생성 및 인터넷 게이트웨이로 라우팅</span>
</span></span><span class=line><span class=cl><span class=n>route_table</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTable</span><span class=p>(</span><span class=s2>&#34;resumait-public-rt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>routes</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTableRouteArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>cidr_block</span><span class=o>=</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>gateway_id</span><span class=o>=</span><span class=n>igw</span><span class=o>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>    <span class=p>)],</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-public-rt&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 라우트 테이블을 퍼블릭 서브넷에 연결</span>
</span></span><span class=line><span class=cl><span class=n>route_table_association</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>RouteTableAssociation</span><span class=p>(</span><span class=s2>&#34;resumait-public-rta&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>subnet_id</span><span class=o>=</span><span class=n>public_subnet</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>route_table_id</span><span class=o>=</span><span class=n>route_table</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 보안 그룹 생성</span>
</span></span><span class=line><span class=cl><span class=n>security_group</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroup</span><span class=p>(</span><span class=s2>&#34;resumait-web-sg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Allow HTTP and SSH access&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>ingress</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupIngressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>from_port</span><span class=o>=</span><span class=mi>80</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>to_port</span><span class=o>=</span><span class=mi>80</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>         <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupIngressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>from_port</span><span class=o>=</span><span class=mi>443</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>to_port</span><span class=o>=</span><span class=mi>443</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupIngressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>from_port</span><span class=o>=</span><span class=mi>22</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>to_port</span><span class=o>=</span><span class=mi>22</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>egress</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>SecurityGroupEgressArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>protocol</span><span class=o>=</span><span class=s2>&#34;-1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>from_port</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>to_port</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cidr_blocks</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>)],</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-web-sg&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># AMI 선택</span>
</span></span><span class=line><span class=cl><span class=n>ami</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>get_ami</span><span class=p>(</span><span class=n>most_recent</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>owners</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;099720109477&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>filters</span><span class=o>=</span><span class=p>[</span><span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>GetAmiIdsFilterArgs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>name</span><span class=o>=</span><span class=s2>&#34;name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>values</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>)])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용자 데이터 스크립트</span>
</span></span><span class=line><span class=cl><span class=n>user_data</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s2>apt-get update
</span></span></span><span class=line><span class=cl><span class=s2>apt-get install -y docker.io docker-compose
</span></span></span><span class=line><span class=cl><span class=s2>systemctl start docker
</span></span></span><span class=line><span class=cl><span class=s2>systemctl enable docker
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># EC2 인스턴스 생성</span>
</span></span><span class=line><span class=cl><span class=n>instance</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>ec2</span><span class=o>.</span><span class=n>Instance</span><span class=p>(</span><span class=s2>&#34;resumait-web-server&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>instance_type</span><span class=o>=</span><span class=s2>&#34;t2.micro&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vpc_security_group_ids</span><span class=o>=</span><span class=p>[</span><span class=n>security_group</span><span class=o>.</span><span class=n>id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>ami</span><span class=o>=</span><span class=n>ami</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>subnet_id</span><span class=o>=</span><span class=n>public_subnet</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user_data</span><span class=o>=</span><span class=n>user_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-web-server&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>key_name</span><span class=o>=</span><span class=s2>&#34;resumait-dev&#34;</span><span class=p>)</span>  <span class=c1># 기존 키 페어 이름을 지정하세요</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 출력</span>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s2>&#34;instance_public_ip&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>public_ip</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IAM 사용자 생성 (콘솔 액세스 활성화)</span>
</span></span><span class=line><span class=cl><span class=n>shell_user</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>User</span><span class=p>(</span><span class=s2>&#34;resumait-shell-user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>=</span><span class=s2>&#34;resumait-shell-user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-shell-user&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 콘솔 로그인 비밀번호 생성</span>
</span></span><span class=line><span class=cl><span class=n>login_profile</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>UserLoginProfile</span><span class=p>(</span><span class=s2>&#34;resumait-shell-user-login&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>shell_user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>password_reset_required</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IAM 액세스 키 생성</span>
</span></span><span class=line><span class=cl><span class=n>access_key</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>AccessKey</span><span class=p>(</span><span class=s2>&#34;resumait-shell-user-key&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>shell_user</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># EC2 접근을 위한 IAM 정책 생성</span>
</span></span><span class=line><span class=cl><span class=n>shell_policy</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>Policy</span><span class=p>(</span><span class=s2>&#34;resumait-shell-policy&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Policy for EC2 shell access&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>policy</span><span class=o>=</span><span class=s2>&#34;&#34;&#34;{
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;Statement&#34;: [
</span></span></span><span class=line><span class=cl><span class=s2>            {
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Action&#34;: [
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;ec2:DescribeInstances&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;ec2-instance-connect:SendSSHPublicKey&#34;
</span></span></span><span class=line><span class=cl><span class=s2>                ],
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Resource&#34;: &#34;*&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            }
</span></span></span><span class=line><span class=cl><span class=s2>        ]
</span></span></span><span class=line><span class=cl><span class=s2>    }&#34;&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-shell-policy&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용자에게 정책 연결</span>
</span></span><span class=line><span class=cl><span class=n>policy_attachment</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>UserPolicyAttachment</span><span class=p>(</span><span class=s2>&#34;resumait-shell-policy-attachment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>shell_user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>policy_arn</span><span class=o>=</span><span class=n>shell_policy</span><span class=o>.</span><span class=n>arn</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IAM 사용자 셀프 관리 정책 생성</span>
</span></span><span class=line><span class=cl><span class=n>self_manage_policy</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>Policy</span><span class=p>(</span><span class=s2>&#34;resumait-shell-self-manage-policy&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Policy for self-managing credentials and profile&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>policy</span><span class=o>=</span><span class=s2>&#34;&#34;&#34;{
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;Statement&#34;: [
</span></span></span><span class=line><span class=cl><span class=s2>            {
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Action&#34;: [
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:ChangePassword&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:GetAccountPasswordPolicy&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:UpdateLoginProfile&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:GetLoginProfile&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:UpdateUser&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>                    &#34;iam:GetUser&#34;
</span></span></span><span class=line><span class=cl><span class=s2>                ],
</span></span></span><span class=line><span class=cl><span class=s2>                &#34;Resource&#34;: [&#34;arn:aws:iam::*:user/${aws:username}&#34;]
</span></span></span><span class=line><span class=cl><span class=s2>            }
</span></span></span><span class=line><span class=cl><span class=s2>        ]
</span></span></span><span class=line><span class=cl><span class=s2>    }&#34;&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>common_tags</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;resumait-shell-self-manage-policy&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용자에게 셀프 관리 정책 연결</span>
</span></span><span class=line><span class=cl><span class=n>self_manage_policy_attachment</span> <span class=o>=</span> <span class=n>aws</span><span class=o>.</span><span class=n>iam</span><span class=o>.</span><span class=n>UserPolicyAttachment</span><span class=p>(</span><span class=s2>&#34;resumait-shell-self-manage-attachment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>shell_user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>policy_arn</span><span class=o>=</span><span class=n>self_manage_policy</span><span class=o>.</span><span class=n>arn</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 유저 정보 출력</span>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s1>&#39;shell_user&#39;</span><span class=p>,</span> <span class=n>shell_user</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 액세스 키와 콘솔 비밀번호 정보 출력</span>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s2>&#34;shell_user_access_key_id&#34;</span><span class=p>,</span> <span class=n>access_key</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s2>&#34;shell_user_secret_access_key&#34;</span><span class=p>,</span> <span class=n>access_key</span><span class=o>.</span><span class=n>secret</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>pulumi</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=s2>&#34;shell_user_console_password&#34;</span><span class=p>,</span> <span class=n>login_profile</span><span class=o>.</span><span class=n>password</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=후기>후기<a hidden class=anchor aria-hidden=true href=#후기>#</a></h2><ul><li>콘솔로 인프라 구성하는 것보다 훨씬 빠르고 쉽게 구성할 수 있었습니다.<ul><li>비슷한 인프라를 콘솔로 구성해봤기 봤고, 코드가 의도한대로인지 대충은 알 수 있었기 때문에 더 좋았다고 생각합니다.</li><li>한눈에 보인다는 점에서 더더욱 좋았습니다</li></ul></li><li>앞으로 UI는 AI 중심으로 재편될 것<ul><li>내 기억을 떠올려보면 콘솔로 이 인프라를 처음 구성할 때 며칠은 걸렸음</li><li>공부해야 할 개념이 너무 많고 뭐가 있는지 찾기 힘들고 불편했었음</li><li>UI는 필요한 부분만 보여줘야 하는데 AWS 콘솔은 보여주는 게 너무 많음</li><li>AI가 이런 부분을 잘 해결해 줄 수 있을 것 같음</li></ul></li></ul><p>콘솔로 인프라를 구성할 때보다 훨씬 빠르고 쉽게 구성할 수 있었습니다. 정확히 재보진 않았지만 1시간을 넘진 않았습니다. 비슷한 인프라를 콘솔로 구성해보아서 지식/경험이 있었고 코드가 의도한대로 작성했는지 알 수 있었기 때문에 더 효율적이라고 생각합니다. AWS의 끔찍한(개인적인 생각입니다) UI와 다르게 필요한 부분만 한 눈에 보여 좋았습니다.
앞으로 UI도 AI 중심으로 재편될 것이 분명합니다. 제가 처음으로 AWS 인프라를 구성하던 때를 떠올려보면 EC2 인스턴스 목록을 보는 데만 몇 시간이 걸렸습니다. 보여주는 정보량이 너무 많아서 찾기 힘들고 불편했었습니다. AI를 사용하면 불필요한 EC2 > 인스턴스 위계 계층 부분을 UI에서 전부 없애고 검색창 하나면 됩니다. 사용자 수준에 따라 보여주는 정보 수준도 다르게할 수 있습니다. 수준이 높다면 설정 하나하나 보여주지만 수준이 낮다면 어떤 운영체제 이미지를 썼는지 보여주지 않고 인스턴스 상태만 보여주는 식으로요. AI가 가져올 미래가 새삼 두려워지는 하루였습니다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://maintain0404.github.io/tags/pulumi/>pulumi</a></li><li><a href=https://maintain0404.github.io/tags/llm/>llm</a></li><li><a href=https://maintain0404.github.io/tags/iac/>iac</a></li><li><a href=https://maintain0404.github.io/tags/infrastructure-as-code/>Infrastructure as Code</a></li></ul><nav class=paginav><a class=next href=https://maintain0404.github.io/posts/fastapi2litestar/><span class=title>Next »</span><br><span>안녕 Litestar</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on x" href="https://x.com/intent/tweet/?text=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi&amp;url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f&amp;hashtags=pulumi%2cllm%2ciac%2cInfrastructureasCode"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f&amp;title=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi&amp;summary=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi&amp;source=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f&title=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on whatsapp" href="https://api.whatsapp.com/send?text=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi%20-%20https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on telegram" href="https://telegram.me/share/url?text=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi&amp;url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LLM으로 IaC(Infrastructure as Code)해본 후기 with Pulumi on ycombinator" href="https://news.ycombinator.com/submitlink?t=LLM%ec%9c%bc%eb%a1%9c%20IaC%28Infrastructure%20as%20Code%29%ed%95%b4%eb%b3%b8%20%ed%9b%84%ea%b8%b0%20with%20Pulumi&u=https%3a%2f%2fmaintain0404.github.io%2fposts%2fiac_with_pulumi_and_llm.ko%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=maintain0404/blog issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://maintain0404.github.io/>Taein.dev</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>