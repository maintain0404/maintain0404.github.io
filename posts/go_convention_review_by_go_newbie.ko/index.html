<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>뱅크샐러드 Go 컨벤션 리뷰 | Taein.dev</title><meta name=keywords content="Coding Convention,Go,Golang"><meta name=description content="뱅크샐러드 Go 컨벤션을 읽어본 후기"><meta name=author content="Me"><link rel=canonical href=https://maintain0404.github.io/posts/go_convention_review_by_go_newbie.ko/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://maintain0404.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://maintain0404.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://maintain0404.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://maintain0404.github.io/apple-touch-icon.png><link rel=mask-icon href=https://maintain0404.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="뱅크샐러드 Go 컨벤션 리뷰"><meta property="og:description" content="뱅크샐러드 Go 컨벤션을 읽어본 후기"><meta property="og:type" content="article"><meta property="og:url" content="https://maintain0404.github.io/posts/go_convention_review_by_go_newbie.ko/"><meta property="og:image" content="https://maintain0404.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-20T20:51:23+09:00"><meta property="article:modified_time" content="2023-09-20T20:51:23+09:00"><meta property="og:site_name" content="Taein.dev"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maintain0404.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="뱅크샐러드 Go 컨벤션 리뷰"><meta name=twitter:description content="뱅크샐러드 Go 컨벤션을 읽어본 후기"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://maintain0404.github.io/posts/"},{"@type":"ListItem","position":2,"name":"뱅크샐러드 Go 컨벤션 리뷰","item":"https://maintain0404.github.io/posts/go_convention_review_by_go_newbie.ko/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"뱅크샐러드 Go 컨벤션 리뷰","name":"뱅크샐러드 Go 컨벤션 리뷰","description":"뱅크샐러드 Go 컨벤션을 읽어본 후기","keywords":["Coding Convention","Go","Golang"],"articleBody":"개요 얼마 전 backsalad에서 Go 코딩 컨벤션(이하 컨벤션) 포스팅을 올렸습니다. 지인 추천으로 한 번 읽어보았는데, 치밀하게 구성되어 있어서 Go는 잘 모르지만..! 😅 리뷰를 해보게 되었습니다.\n참고 필자의 Go 언어 수준은 문법을 알고 Go 언어 프로젝트 몇 개를 살펴본 정도라고 보시면 되겠습니다. 필자는 컨벤션 모든 부분을 리뷰하지 않습니다. 인상 깊게 본 부분 위주로 리뷰합니다. 부분 별 리뷰 Panic과 Error 컨벤션에 따르면 panic은 애플리케이션 초기화 과정 중 정상 스타트가 불가능한 경우에만 사용합니다. Go에는 에러 처리가 error와 panic(fatal)로 이원화 되어 있습니다. Rust에서도 비슷한 접근을 볼 수 있습니다. 이 방식은 함수 작성 시 암시적인 에러를 배제하고 좀 더 순수하게 작성할 수 있다는 점에서 좋다고 생각합니다.\n// Go의 panic과 error 이용 예외 처리 func MustPanic() { panic(\"Panic\") } func ReturnError() error { return errors.New(\"Error\") } func Handle() string { if err := ReturnError(); err != nil { return \"Success\" } else { return \"Fail\" } } func Go() { defer func() { if x := recover(); x != nil { fmt.Print(\"Panic occured. Stop application.\") } } MustPanic() Handle() } 다른 언어(Java, Python, Javascript, …)에서 볼 수 있는 try…catch… 방식과 비교해서 살펴보자면, try…catch… 방식으로는 상속을 통해 발생할 수 있는 에러 경계를 나누는 것이 가능하긴 합니다. 하지만 시간에 쫒겨 에러 슈퍼클래스로 모든 에러를 전부 처리해버릴 수 있고, 에러 상속 구조를 팀에서 자체적으로 논의해야 한다는 문제가 있습니다. 에러 처리 범위가 모호해 처리하지 말아야 할 에러를 처리해서 생기는 문제는 생각보다 쉽게 일어납니다. 반면에 try…catch… 방식은 필요하면, 에러 처리를 호출자에게 넘겨버릴 수 있기 때문에 코드를 줄일 수 있습니다. 각자 취향 차이지만, Go라는 언어의 철학 - 단순성을 생각해봤을 때 에러 이원화 방식이 Go에 좀 더 어울린다고 생각합니다.\n# Python의 Try... Catch... 스타일 에외 처리 def raise_exception(): raise ValueError def pass_exception(): raise_exception() def handle_exception(): try: pass_exception() except ValueError: pass HTTP Client 컨벤션에 따르면 외부 API를 호출하는 경우 따로 Http Client를 사용해야 합니다. 추가적으로 커넥션 풀까지 client에서 내부적으로 설정하도록 가이드되어 있습니다. 외부 API는 변경에 대한 통제가 불가능하므로 반드시 변경에 유연한 구조가 되어야 합니다. 스키마 변경 시, 구조체 관련 코드를 살짝 변경하는 것만으로 손쉽게 하위 호환성을 유지할 수 있다는 점에서 현명한 선택인 것 같습니다.\n// Functional Option 패턴 struct PostApiBody{ int a } func ParamA(int a) { return func(b *PostApiBody) { b.a = a } } // 파라미터가 추가된다면 ParamX 함수를 추가하고, // 변경된다면 ParamX 함수를 수정하는 것으로 하위 호환성 보장 가능 func (c *HttpClient) CreatePost(params ...func(*PostApiBody)) { body := \u0026PostApiBody{} for _, p := range params { p(body) } client.Post(\"URL\", \"application/json\", body.Json()) } 테스트 컨번션에 따르면 given, when, then 구조의 테이블 테스트를 권장하고, 테스트 스위트를 사용하지 않습니다. 몽키패치도 배제하고 사이드 이펙트가 있는 코드는 무조건 외부에서 주입하도록 하고 있습니다. 외부효과를 절대적으로 배제하고 단순명료함을 구현하기 위한 노력이 엿보입니다. 매 테스트에서 어떤 방식으로 데이터베이스를 세팅하는지, 어떻게 데이터베이스의 외부성을 제어하는지 종합적으로 외부 데이터베이스를 사용하는 테스트는 어떻게 진행하는지 궁금하네요.\nreflect 컨벤션에서는 reflect를 쓰지 않기를 권장하고 있습니다. ‘서버 핸들러에서 reflect를 사용한다면 보통 무언가 잘못되어가고 있다는 신호’라고 언급했는데 굉장히 동의합니다. 무슨 데이터가 들어오고 나갈 것인지 명확하게 정의되지 않았거나 다른 영역에서 우연히 동일한 형태의 데이터를 사용하는 경우가 대부분일 것이라 생각합니다. 전자의 경우, 애초에 코드를 작성하고 있으면 안 되는 시점입니다. 방향성에 대해 좀 더 고민하고 있어야 하죠. 후자의 경우에는, 근본적으로 분리될 가능성이 높은 코드라고 생각하고 다르게 쓰는 것이 옳습니다. 현실에서 수렴진화처럼, 전혀 상관없는 종이지만 어떤 환경적 여건에 의해 동일한 모습일 뿐입니다. 이 ‘환경적 여건’이 달라진다면, 그 형태가 달라질 가능성이 높죠.\n네이밍 detail, Summary, Info 비권장 컨벤션에서는 Xdetail, Xsummary, Xinfo 형식의 이름을 권장하지 않습니다. 그 이유는 시간에 따라 같은 단어라도 내용이 달라질 수 있게 되기 때문입니다. 시간을 고려하는 관점은 굉장히 흥미로웠습니다. 동 시점에 요약과 상세가 가리키는 필드 목록은 같아야 합니다. 같은 이름을 두 번 쓸 수는 없으니까요. 이런 이유로 요약과 상세가 두 종류 이상인 경우는 다른 버전을 동시에 서빙하는 경우 밖에 없다고 생각하고 이름 혹은 패키지에 버전을 명시하는 것을 관습적으로 사용했었는데, 이런 방법도 있구나 싶었습니다.\n패키지 네이밍 컨벤션에서는 core, util, helper, common, infra같은 이름을 사용하지 않도록 권장하고 있습니다. 위 이름은 생각하기 쉽고 모두가 아는 만큼, 모두가 이해하는 범위가 미묘하게 다릅니다. 흔하지 않은 단어를 사용했다면, 그것은 팀만의 언어가 되고 팀에서의 의미는 명확해집니다. 저는 위 이름으로 디렉토리 만드는 것을 선호하긴 하지만, 많은 다른 Go 프로젝트와 Go라는 언어의 철학을 고려할 때 적절한 선택인 것 같습니다.\n프로젝트 구조 컨벤션에 따르면 디렉토리 추가는 최소한으로 해야 합니다. 개인적으로는 한 디렉토리에 너무 파일이 많은 것을 좋아하지 않지만 Go에서는 이런 스타일이 일반적인 관례인 것 같더군요.\n전반적인 소감 전반적으로 단순하고, 코드에서 맥락을 최대한 배제해 순수하게 코드만 바라볼 수 있게 하는 데 집중하는, 깊은 고민과 노하우가 느껴지는 컨벤션이라고 생각합니다. 전반적으로 단순함에 집중한 것이 인상깊었습니다. 좋은 글 공개해주신 뱅크샐러드 팀에게 감사드립니다. 😄\n","wordCount":"718","inLanguage":"en","datePublished":"2023-09-20T20:51:23+09:00","dateModified":"2023-09-20T20:51:23+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://maintain0404.github.io/posts/go_convention_review_by_go_newbie.ko/"},"publisher":{"@type":"Organization","name":"Taein.dev","logo":{"@type":"ImageObject","url":"https://maintain0404.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://maintain0404.github.io/ accesskey=h title="Taein.dev (Alt + H)"><img src=https://maintain0404.github.io/apple-touch-icon.png alt aria-label=logo height=35>Taein.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://maintain0404.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://maintain0404.github.io/archives title=archives><span>archives</span></a></li><li><a href=https://maintain0404.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://maintain0404.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://maintain0404.github.io/posts/>Posts</a></div><h1 class=post-title>뱅크샐러드 Go 컨벤션 리뷰</h1><div class=post-meta><span title='2023-09-20 20:51:23 +0900 KST'>September 20, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;718 words&nbsp;·&nbsp;Me</div></header><div class=post-content><h2 id=개요>개요<a hidden class=anchor aria-hidden=true href=#개요>#</a></h2><p>얼마 전 backsalad에서 <a href=https://blog.banksalad.com/tech/go-best-practice-in-banksalad/>Go 코딩 컨벤션(이하 컨벤션)</a> 포스팅을 올렸습니다. 지인 추천으로 한 번 읽어보았는데, 치밀하게 구성되어 있어서 Go는 잘 모르지만..! 😅 리뷰를 해보게 되었습니다.</p><h3 id=참고>참고<a hidden class=anchor aria-hidden=true href=#참고>#</a></h3><ol><li>필자의 Go 언어 수준은 문법을 알고 Go 언어 프로젝트 몇 개를 살펴본 정도라고 보시면 되겠습니다.</li><li>필자는 컨벤션 모든 부분을 리뷰하지 않습니다. 인상 깊게 본 부분 위주로 리뷰합니다.</li></ol><h2 id=부분-별-리뷰>부분 별 리뷰<a hidden class=anchor aria-hidden=true href=#부분-별-리뷰>#</a></h2><h3 id=panic과-error>Panic과 Error<a hidden class=anchor aria-hidden=true href=#panic과-error>#</a></h3><p>컨벤션에 따르면 panic은 애플리케이션 초기화 과정 중 정상 스타트가 불가능한 경우에만 사용합니다. Go에는 에러 처리가 error와 panic(fatal)로 이원화 되어 있습니다. Rust에서도 비슷한 접근을 볼 수 있습니다. 이 방식은 함수 작성 시 암시적인 에러를 배제하고 좀 더 순수하게 작성할 수 있다는 점에서 좋다고 생각합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Go의 panic과 error 이용 예외 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>MustPanic</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;Panic&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>ReturnError</span><span class=p>()</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;Error&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Handle</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>ReturnError</span><span class=p>();</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;Success&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;Fail&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Go</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>x</span> <span class=o>:=</span> <span class=nb>recover</span><span class=p>();</span> <span class=nx>x</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;Panic occured. Stop application.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nf>MustPanic</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nf>Handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>다른 언어(Java, Python, Javascript, &mldr;)에서 볼 수 있는 <code>try</code>&mldr;<code>catch</code>&mldr; 방식과 비교해서 살펴보자면, <code>try</code>&mldr;<code>catch</code>&mldr; 방식으로는 상속을 통해 발생할 수 있는 에러 경계를 나누는 것이 가능하긴 합니다. 하지만 시간에 쫒겨 에러 슈퍼클래스로 모든 에러를 전부 처리해버릴 수 있고, 에러 상속 구조를 팀에서 자체적으로 논의해야 한다는 문제가 있습니다. 에러 처리 <a href=https://docs.pydantic.dev/latest/migration/#typeerror-is-no-longer-converted-to-validationerror-in-validators>범위가 모호해 처리하지 말아야 할 에러를 처리해서 생기는 문제</a>는 생각보다 쉽게 일어납니다. 반면에 <code>try</code>&mldr;<code>catch</code>&mldr; 방식은 필요하면, 에러 처리를 호출자에게 넘겨버릴 수 있기 때문에 코드를 줄일 수 있습니다. 각자 취향 차이지만, Go라는 언어의 철학 - 단순성을 생각해봤을 때 에러 이원화 방식이 Go에 좀 더 어울린다고 생각합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Python의 Try... Catch... 스타일 에외 처리</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>raise_exception</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>ValueError</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pass_exception</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>raise_exception</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle_exception</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>pass_exception</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></div><h3 id=http-client>HTTP Client<a hidden class=anchor aria-hidden=true href=#http-client>#</a></h3><p>컨벤션에 따르면 외부 API를 호출하는 경우 따로 Http Client를 사용해야 합니다. 추가적으로 커넥션 풀까지 client에서 내부적으로 설정하도록 가이드되어 있습니다. 외부 API는 변경에 대한 통제가 불가능하므로 반드시 변경에 유연한 구조가 되어야 합니다. 스키마 변경 시, 구조체 관련 코드를 살짝 변경하는 것만으로 손쉽게 하위 호환성을 유지할 수 있다는 점에서 현명한 선택인 것 같습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Functional Option 패턴
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>struct</span> <span class=nx>PostApiBody</span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>ParamA</span><span class=p>(</span><span class=kt>int</span> <span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kd>func</span><span class=p>(</span><span class=nx>b</span> <span class=o>*</span><span class=nx>PostApiBody</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nx>a</span> <span class=p>=</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 파라미터가 추가된다면 ParamX 함수를 추가하고, 
</span></span></span><span class=line><span class=cl><span class=c1>// 변경된다면 ParamX 함수를 수정하는 것으로 하위 호환성 보장 가능
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>HttpClient</span><span class=p>)</span> <span class=nf>CreatePost</span><span class=p>(</span><span class=nx>params</span> <span class=o>...</span><span class=kd>func</span><span class=p>(</span><span class=o>*</span><span class=nx>PostApiBody</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>body</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>PostApiBody</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>p</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>params</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>p</span><span class=p>(</span><span class=nx>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>client</span><span class=p>.</span><span class=nf>Post</span><span class=p>(</span><span class=s>&#34;URL&#34;</span><span class=p>,</span> <span class=s>&#34;application/json&#34;</span><span class=p>,</span> <span class=nx>body</span><span class=p>.</span><span class=nf>Json</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=테스트>테스트<a hidden class=anchor aria-hidden=true href=#테스트>#</a></h3><p>컨번션에 따르면 given, when, then 구조의 테이블 테스트를 권장하고, 테스트 스위트를 사용하지 않습니다. 몽키패치도 배제하고 사이드 이펙트가 있는 코드는 무조건 외부에서 주입하도록 하고 있습니다. 외부효과를 절대적으로 배제하고 단순명료함을 구현하기 위한 노력이 엿보입니다. 매 테스트에서 어떤 방식으로 데이터베이스를 세팅하는지, 어떻게 데이터베이스의 외부성을 제어하는지 종합적으로 외부 데이터베이스를 사용하는 테스트는 어떻게 진행하는지 궁금하네요.</p><h3 id=reflect>reflect<a hidden class=anchor aria-hidden=true href=#reflect>#</a></h3><p>컨벤션에서는 reflect를 쓰지 않기를 권장하고 있습니다. &lsquo;서버 핸들러에서 reflect를 사용한다면 보통 무언가 잘못되어가고 있다는 신호&rsquo;라고 언급했는데 굉장히 동의합니다. 무슨 데이터가 들어오고 나갈 것인지 명확하게 정의되지 않았거나 다른 영역에서 우연히 동일한 형태의 데이터를 사용하는 경우가 대부분일 것이라 생각합니다. 전자의 경우, 애초에 코드를 작성하고 있으면 안 되는 시점입니다. 방향성에 대해 좀 더 고민하고 있어야 하죠. 후자의 경우에는, 근본적으로 분리될 가능성이 높은 코드라고 생각하고 다르게 쓰는 것이 옳습니다. 현실에서 <a href=https://ko.wikipedia.org/wiki/%EC%88%98%EB%A0%B4_%EC%A7%84%ED%99%94>수렴진화</a>처럼, 전혀 상관없는 종이지만 어떤 환경적 여건에 의해 동일한 모습일 뿐입니다. 이 &lsquo;환경적 여건&rsquo;이 달라진다면, 그 형태가 달라질 가능성이 높죠.</p><h3 id=네이밍>네이밍<a hidden class=anchor aria-hidden=true href=#네이밍>#</a></h3><h4 id=detail-summary-info-비권장>detail, Summary, Info 비권장<a hidden class=anchor aria-hidden=true href=#detail-summary-info-비권장>#</a></h4><p>컨벤션에서는 <code>Xdetail</code>, <code>Xsummary</code>, <code>Xinfo</code> 형식의 이름을 권장하지 않습니다. 그 이유는 시간에 따라 같은 단어라도 내용이 달라질 수 있게 되기 때문입니다. 시간을 고려하는 관점은 굉장히 흥미로웠습니다. 동 시점에 요약과 상세가 가리키는 필드 목록은 같아야 합니다. 같은 이름을 두 번 쓸 수는 없으니까요. 이런 이유로 요약과 상세가 두 종류 이상인 경우는 다른 버전을 동시에 서빙하는 경우 밖에 없다고 생각하고 이름 혹은 패키지에 버전을 명시하는 것을 관습적으로 사용했었는데, 이런 방법도 있구나 싶었습니다.</p><h4 id=패키지-네이밍>패키지 네이밍<a hidden class=anchor aria-hidden=true href=#패키지-네이밍>#</a></h4><p>컨벤션에서는 <code>core</code>, <code>util</code>, <code>helper</code>, <code>common</code>, <code>infra</code>같은 이름을 사용하지 않도록 권장하고 있습니다. 위 이름은 생각하기 쉽고 모두가 아는 만큼, 모두가 이해하는 범위가 미묘하게 다릅니다. 흔하지 않은 단어를 사용했다면, 그것은 팀만의 언어가 되고 팀에서의 의미는 명확해집니다. 저는 위 이름으로 디렉토리 만드는 것을 선호하긴 하지만, 많은 다른 Go 프로젝트와 Go라는 언어의 철학을 고려할 때 적절한 선택인 것 같습니다.</p><h3 id=프로젝트-구조>프로젝트 구조<a hidden class=anchor aria-hidden=true href=#프로젝트-구조>#</a></h3><p>컨벤션에 따르면 디렉토리 추가는 최소한으로 해야 합니다. 개인적으로는 한 디렉토리에 너무 파일이 많은 것을 좋아하지 않지만 Go에서는 이런 스타일이 일반적인 관례인 것 같더군요.</p><h2 id=전반적인-소감>전반적인 소감<a hidden class=anchor aria-hidden=true href=#전반적인-소감>#</a></h2><p>전반적으로 단순하고, 코드에서 맥락을 최대한 배제해 순수하게 코드만 바라볼 수 있게 하는 데 집중하는, 깊은 고민과 노하우가 느껴지는 컨벤션이라고 생각합니다. 전반적으로 단순함에 집중한 것이 인상깊었습니다. 좋은 글 공개해주신 뱅크샐러드 팀에게 감사드립니다. 😄</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://maintain0404.github.io/tags/coding-convention/>Coding Convention</a></li><li><a href=https://maintain0404.github.io/tags/go/>Go</a></li><li><a href=https://maintain0404.github.io/tags/golang/>Golang</a></li></ul><nav class=paginav><a class=prev href=https://maintain0404.github.io/posts/first_product_release_review.ko/><span class=title>« Prev</span><br><span>처음으로 프로덕트를 공개해본 후기</span></a>
<a class=next href=https://maintain0404.github.io/posts/beware_of_architecture.ko/><span class=title>Next »</span><br><span>아키텍처를 경계하라</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on twitter" href="https://twitter.com/intent/tweet/?text=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0&url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f&hashtags=CodingConvention%2cGo%2cGolang"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f&title=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0&summary=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0&source=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f&title=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on whatsapp" href="https://api.whatsapp.com/send?text=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0%20-%20https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 뱅크샐러드 Go 컨벤션 리뷰 on telegram" href="https://telegram.me/share/url?text=%eb%b1%85%ed%81%ac%ec%83%90%eb%9f%ac%eb%93%9c%20Go%20%ec%bb%a8%eb%b2%a4%ec%85%98%20%eb%a6%ac%eb%b7%b0&url=https%3a%2f%2fmaintain0404.github.io%2fposts%2fgo_convention_review_by_go_newbie.ko%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://maintain0404.github.io/>Taein.dev</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>